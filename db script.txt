CREATE DATABASE REALTY;
CREATE TABLE User (user_id int AUTO_INCREMENT NOT NULL,name varchar(25),passwordt varchar(8),phone_number varchar(10),PRIMARY KEY (user_id));
				   
				   
CREATE TABLE Comment (comment_id int AUTO_INCREMENT NOT NULL,text text,user_id int NOT NULL,advert_id int NOT NULL,PRIMARY KEY (comment_id),FOREIGN KEY (user_id) REFERENCES User(user_id),FOREIGN KEY (advert_id) REFERENCES Advert(advert_id));				   

				   
ALTER TABLE User ADD admin BOOL;

ALTER TABLE ADVERT ADD city VARCHAR(15);

ALTER TABLE User ADD Unique(name); 




CREATE TABLE advert(
  advert_id INT NOT NULL AUTO_INCREMENT,
  added_date DATE,
  category VARCHAR(15),
  adressId INT NOT NULL,
  rooms INT,
  coast INT,
  description TEXT,
  user_id INT NOT NULL,
  PRIMARY KEY (advert_id),
  FOREIGN KEY (user_id) REFERENCES User(user_id),
  FOREIGN KEY (adressId) REFERENCES Adress(adressId));



CREATE TABLE adress(
  adressId INT NOT NULL AUTO_INCREMENT,
  cityId INT NOT NULL,
  districtId INT NOT NULL,
  streetId INT NOT NULL,
  houseNum INT,
  apartmentNum INT,
  PRIMARY KEY (adressId),
  FOREIGN KEY (cityId) REFERENCES city(cityId),
  FOREIGN KEY (districtId) REFERENCES district(districtId),
  FOREIGN KEY (streetId) REFERENCES street(streetId));



CREATE TABLE city(
  cityId INT NOT NULL AUTO_INCREMENT,
  cityName varchar(25),
  PRIMARY KEY (cityId));




CREATE TABLE district(
  districtId INT NOT NULL AUTO_INCREMENT,
  districtName varchar(25),
  PRIMARY KEY (districtId));




CREATE TABLE street(
  streetId INT NOT NULL AUTO_INCREMENT,
  streetName varchar(25),
  PRIMARY KEY (streetId));




CREATE TABLE city_district(
  cityDistrId INT NOT NULL AUTO_INCREMENT,
  cityId INT NOT NULL,
  districtId INT NOT NULL,
  PRIMARY KEY (cityDistrId),
  FOREIGN KEY (cityId) REFERENCES city(cityId),
  FOREIGN KEY (districtId) REFERENCES district(districtId));



CREATE TABLE city_distr_str(
  cityDistrId INT NOT NULL,
  streetId INT NOT NULL,
  FOREIGN KEY (cityDistrId) REFERENCES city_district(cityDistrId),
  FOREIGN KEY (streetId) REFERENCES street(streetId));






